---
title: 第八章-排序
date: 2022-07-28
order: 8
toc: true
headerDepth: 2
---

## 8.1 排序的基本概念

排序啥意思，就是字面意思 😆！比如原来数组的元素是`[1, 3, 2]`，排完序就是`[1, 2, 3]`

接下来会介绍很多排序，光看代码挺无聊的，这里推荐一个很好玩的网站

- https://visualgo.net/zh/sorting

这是一个，先从感性上理解各种各样的排序 😉

<!-- 排序，就是重新排列表中的元素，使表中的元素满足按关键字有序的过程 -->

<!-- ### 习题

- 4 对任意7个关键字进行基于比较的排序，至少要进行几次关键字之间的两两比较?→13次，
  假设整个排序过程至少需要做 t 次比较，则存在 $2^t$ 种情况
  由于 n 个记录共有 $n!$ 种不同的排列，因而必须有 $n!$ 种不同的比较路径，于是有$2^t≥ n! \rightarrow t ≥ \log_2(n!)$
  考虑到 t 为整数，故为$\lceil\log_2(n!)\rceil$ ，将 n = 7 代入公式，答案为13 -->

## 8.2 插入排序

### 直接插入排序 Insert Sort

代码实现

```cpp
void InsertSort(int A[], int n) {
int i, j;
for (i = 2; i <= n; i++)
    if (A[i] < A[i - 1]) {
        A[0] = A[i];
        for (j = i - 1; A[0] < A[j]; j--)
            A[j + 1] = A[j];
        A[j + 1] = A[0];
    }
}
```

### 折半插入排序

代码实现 TODO

### 希尔排序 Shell Sort （缩小增量排序）

- 代码 TODO

<!-- ### 习题

- 1 对于5个不同的数据元素进行直接插入排序，最多需要进行的比较次数是（不包含与哨兵的比较）→10次；解析：4+3+2+1=10次，如果加上与哨兵的比较就是14次（5+4+3+2）
- 3【2012】 对同一待排序序列分别进行折半插入排序和直接插入排序，两者之间可能的不同之处是
  ① 排序的总趟数
  ② 元素的移动次数
  ③ 使用辅助空间的数量
  ④ 元素之间的比较次数→④元素之间的比较次数；
  解析：
  用 折半插入排序 的比较次数的数量级在$O(n\log_2n)$ ，
  用 直接插入排序 的比较次数和初始状态有关，在$O(n)\sim O(n^2)$ 之间
- 4 对有 n 个元素的顺序表采用直接插入排序算法进行排序，在最坏情况下所需的比较次数是多少？最好情况呢？（不考虑和哨兵的比较）?→最坏情况 ( n - 1 ) n / 2，最好情况 n - 1
- 12【2009】 用希尔排序方法对一个数据序列排序，若第1趟排序结果为` 9 1 4 13 7 8 20 23 15` ，则采用的增量间隔可能是 ?→3
- 18【2015】希尔排序的组内排序采用的是
  A 直接插入排序
  B 折半插入排序
  C 快速排序
  D 归并排序→A 直接插入排序
- 19【2018】 -->

## 8.3 交换排序

### 冒泡排序 Bubble Sort

代码 TODO

### 快速排序 Quick Sort

代码 TODO

<!-- ### 习题

- 3【2010】对一组数据`2 12 16 88 5 10`进行排序，若前 3 趟排序结果如下
  第一趟：`2 12 16 5 10 88`
  第二趟：`2 12 5 10 16 88 `第三趟：`2 5 10 12 16 88`
  则采用的排序方法可能是 → 冒泡排序
- 4【2011】为实现快速排序算法，待排序序列宜采用的存储方式是 → 顺序存储
- 13
- 14【2014】
- 15【2010】
- 17【2019】排序过程中，对尚未确定最终位置的所有元素进行一遍处理称为一「趟」。下列序列中，不可能是快速排序第二趟结果的是
  A `5 2 16 12 28 60 32 72 `B `2 16 5 28 12 60 32 72 `C `2 12 16 5 28 32 72 60 `D `5 2 12 28 16 32 72 60`→D
- 综合题 6【2016】 -->

## 8.4 选择排序

### 简单选择排序

代码 TODO

### 堆排序

可以分为 大根堆（大顶堆）和 小根堆（小根堆）

代码 TODO

<!-- ### 习题

- 3
- 6
- 8 向具有 n 个关键字的堆中插入一个新元素的时间复杂度为多少？删除一个元素的时间复杂度为多少？→ 均为$O(\log_2n)$
- 9
- 12【2011】已知序列 `25 13 10 12 9` 是大根堆，在序列尾部插入新元素，将其再调整为大根堆，调整过程中元素之间进行的比较次数是 →2，第一次 18 与 10 比较，交换 18 和 1，第二次 18 与 25 比较，共两次
- 13
- 14【2015】已知小根堆为 `8 15 10 21 34 16 12` ，删除关键字 8 之后需重新建堆，再次过程中，关键字之间的比较次数是 →3 ，叶结点 12 变为根结点，重新构建堆，第一次 15 和 10 比较，第二次 12 和 10 比较，交换 10 和 12，第三次 12 和 16 比较
- 15【2018】
- 16【2020】 -->

## 8.5 归并排序和基数排序

### 归并排序 Merge Sort

代码 TODO

### 基数排序 Radix Sort

代码 TODO

<!-- ### 习题

- 6【2016】 对 10TB 的数据文件进行排序，应使用的方法是
  A 希尔排序
  B 堆排序
  C 快速排序
  D 归并排序 →D 归并排序。内存一次性放不下，需要放在外部介质中，外部排序通常采用归并排序法
- 9【2017】
- 13【2013】 -->

## 8.6 各种内部排序算法的比较及应用

- 内部排序算法的比较

| 排序算法     | 空间效率                                           | 时间效率                                           | 稳定性 | 备注                                                         |
| ------------ | -------------------------------------------------- | -------------------------------------------------- | ------ | ------------------------------------------------------------ |
| 插入排序     | $O(1)$                                             | 最好$O(n)$<br/>平均$O(n^2)$<br/>最坏$O(n^2)$       | 稳定   | 比较依赖初始状态                                             |
| 折半插入排序 | $O(1)$                                             | 最好$O(n)$<br/>平均$O(n^2)$<br/>最坏$O(n^2)$       | 稳定   | 比较次数约为 $O(n\log_2n​)$                                   |
| 希尔排序     | $O(1)$                                             | 大约为 $O(n^{1.3})$                                | ❌      |                                                              |
| 冒泡排序     | $O(1)$                                             | 最好$O(n)$<br/>平均$O(n^2)$<br/>最坏 $O(n^2)$      | 稳定   |                                                              |
| 快速排序     | 最好$O(log_2n)$<br/>平均$O(log_2n)$<br/>最坏$O(n)$ | 最好$O(log_2n)$<br/>平均$O(log_2n)$<br/>最坏$O(n)$ | ❌      | 和划分是否对称有关<br />在所有**内部**排序算法中平均性能最优 |
| 简单选择排序 | $O(1)$                                             | $O(n^2)$                                           | ❌      | 与初始状态无关                                               |
| 堆排序       | $O(1)$                                             | $O(log_2n)$                                        | ❌      |                                                              |
| 归并排序     | $O(n)$                                             | $O(log_2n)$                                        | 稳定   |                                                              |
| 基数排序     | $O(r)$                                             | $O(d(n+r))$                                        | 稳定   | r 为基数，d 为趟数，n 为元素个数                             |

- 内部排序算法的应用 - 选取排序方法需要考虑的因素 - 排序算法小结

### 8.6习题 

- 4 下列排序算法中属于稳定排序的是 ①
  平均时间复杂度为$O(\log_2n)$ 的是 ②
  再最好的情况下，时间复杂度可以达到线性时间的有 ③→① 冒泡排序、直接插入排序、归并排序
  ② 堆排序、归并排序、快速排序
  ③ 冒泡排序、直接插入排序
- 7【2012】
- 8 若序列的原始状态为 `1 2 3 4 5 10 6 7 8 9` ，想要使得排序过程中的元素比较次数最少，应采用
  A 插入排序
  B 选择排序
  C 希尔排序
  D 冒泡排序 → 插入排序，插入排序只需比较 n + 4 次，选择排序与初始状态无关，希尔排序和冒泡排序均远大于此
- 10【2015】
- 11【2017】
- 13【2019】
- 14【2020】对大部分元素已有序的数组排序时，直接插入排序比简单选择排序效率更高，其原因是
  ① 直接插入排序过程中元素之间的比较次数更少
  ② 直接插入排序过程中所需的辅助空间更少
  ③ 直接插入排序过程中元素的移动次数更少 →① -->

## 8.7 外部排序

- 外部排序的基本概念
  - 外部排序的总时间 = 内部排序所需的时间 + 外存信息读写的时间 + 内部归并所需的时间
- 外部排序的方法
- 多路平衡归并与败者树
- 置换-选择排序（生成初始归并段）
- 最佳归并树
  
### 8.7习题

- 1 设在磁盘上存放有 375,000 个记录，做 5 路平衡归并排序，内存工作区能容纳 600 个记录，为把所有记录排好序，需要做多少趟归并排序 →4 趟。
  初始归并段的个数 r = 375000 / 600 = 675 个
  第 1 趟把 625 个归并段归并成 625 / 5 = 125 个
  第 2 趟把 125 个归并段归并成 125 / 5 = 25 个
  第 3 趟把 25 个归并段归并成 25 / 5 = 5 个
  第 4 趟把 5 个归并段归并成 5 / 5 = 1 个
- 2 设有 5 个初始归并段，每个归并段有 20 个记录，采用 5 路平衡归并排序
  使用传统的顺序选出最小记录（简单选择排序）的方法，总的比较次数是 ？
  若采用败者树最小的方法，总的比较次数是？→396，300
  ① 采用传统方法 ：(100-1) _ 4 = 396 次
  ② 采用败者树的方法：败者树的高度为 $h = \lceil \log_25\rceil = 3$ ，每次参加比较的记录中选择一个关键字最小的记录，比较次数不超过 h，共 100 个记录，需要的比较次数不超过 100 _ 3 = 300 次
- 7【2013】已知三叉树 T 中 6 个叶结点的权分别是`2 3 4 5 6 7` ，T 的带权（外部）路径长度最小是多少，答案：→46，这里考察了一个知识点：k 叉哈夫曼树需要多少个叶子结点？$n_k = \frac {n_0 -1}{k-1}$ ，右边必定能被整除
- 8【2019】设外存上有 120 个初始归并段，进行 12 路归并时，为实现最佳归并，需要补充的虚段个数是多少，答案 →2，这里考察了一个知识点：k 叉哈夫曼树需要多少个叶子结点？$n_k = \frac {n_0 -1}{k-1}$ ，右边必定能被整除 -->